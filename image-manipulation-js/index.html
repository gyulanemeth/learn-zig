<html>
    <head>
        <title>js image manipulation test</title>
        <style>
          body {
            margin: 0;
            padding: 0;
          }

          #canvas {
            transform: scale(0.4) translate(-70%, -70%);
          }
        </style>
    </head>
    <body>
        <button id="grayscale-btn">grayscale</button><span id="exec-time"></span>
        <canvas id="canvas"></canvas>
        <script>
            const canvas = document.getElementById('canvas')
            const context = canvas.getContext('2d')

            function loadImg(url) {
              return new Promise(resolve => {
                let img = new Image()
                img.crossOrigin = 'Anonymous'
                img.onload = () => resolve(img)
                img.src = url
              })
            }

            async function loadImgToCanvas(url) {
              const img = await loadImg(url)
              canvas.width = img.naturalWidth
              canvas.height = img.naturalHeight
              context.drawImage(img, 0, 0)

              document.getElementById('grayscale-btn').onclick = toGrayscale
            }

            loadImgToCanvas('./valencia.jpeg')
        </script>
    </body>
</html>